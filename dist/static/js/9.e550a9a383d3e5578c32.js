webpackJsonp([9],{"1SgU":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("y/jF"),r=i("qwAB"),a=i("FWz8"),o=i("XEAW"),n={name:"order",data:function(){return{orderList:[],switchList:["全部","待付款","已发货","已取消","已支付"],curIndex:0,orderIndex:"",orderDetail:{},isNoMore:!1}},created:function(){var t=this;setTimeout(function(){t._getOrderList()},20),this.orderNum=0},activated:function(){this.$refs.scroll.refresh()},methods:{toPay:function(t){this.$router.push({name:"pay",params:{orderNo:t}})},packUpDetail:function(){this.orderIndex=""},lookCurOrder:function(t){this.orderIndex=t,this.$refs.scroll.refresh()},selectOrderType:function(t){this.curIndex=t,this.isNoMore=!1,this._getOrderList()},cancelCurOrder:function(t){this.orderNum=t,this.$refs.confirm.show()},confrim:function(){var t=this;Object(a.a)(this.orderNum).then(function(e){t.$notice("订单取消成功"),t._getOrderList(),t.orderNum=0}).catch(function(e){t.$notice(e.msg)})},_orderType:function(t,e){if(t&&t.length>0)return t.filter(function(t){return t.statusDesc===e})},_getOrderList:function(){var t=this;Object(a.d)(1,100).then(function(e){var i=e.data.list;1===t.curIndex?t.orderList=t._orderType(i,"未支付"):2===t.curIndex?t.orderList=t._orderType(i,"已发货"):3===t.curIndex?t.orderList=t._orderType(i,"已取消"):4===t.curIndex?t.orderList=t._orderType(i,"已支付"):t.orderList=e.data.list,0===t.orderList.length&&(t.isNoMore=!0)})}},components:{Scroll:r.a,Loading:s.a,Confirm:o.a}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-wrap"},[i("div",{staticClass:"page-title"},[t._v("订单管理")]),t._v(" "),i("ul",{staticClass:"switch-list"},t._l(t.switchList,function(e,s){return i("li",{key:s,staticClass:"switch-item",class:{active:s===t.curIndex},on:{click:function(e){return t.selectOrderType(s)}}},[t._v("\n      "+t._s(e)+"\n    ")])}),0),t._v(" "),i("scroll",{ref:"scroll",staticClass:"order-list-scroll",attrs:{data:t.orderList}},[i("div",[t.orderList.length>0?i("ul",{staticClass:"order-list"},t._l(t.orderList,function(e,s){return i("li",{key:e.createTime,staticClass:"order-item"},[i("p",{staticClass:"order-status"},[t._v(t._s(e.statusDesc))]),t._v(" "),i("ul",t._l(e.orderItemVoList,function(s,r){return i("router-link",{key:r,staticClass:"order-info",attrs:{tag:"li",to:"/product-list/"+s.productId}},[i("div",{staticClass:"img-box"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.imageHost+s.productImage,expression:"item.imageHost+product.productImage"}],staticClass:"img",attrs:{alt:""}})]),t._v(" "),i("span",{staticClass:"text"},[t._v(t._s(s.productName))]),t._v(" "),i("div",{staticClass:"item-info"},[i("span",{staticClass:"total"},[t._v("x"+t._s(s.quantity)+" ")]),t._v(" "),i("span",{staticClass:"price"},[t._v(" "+t._s(s.currentUnitPrice))])])])}),1),t._v(" "),i("div",{staticClass:"order-detail-info"},[i("div",{staticClass:"detail-btn",on:{click:function(e){return t.lookCurOrder(s)}}},[t._v("\n              查看详情"),i("i",{staticClass:"iconfont icon-more"},[t._v("")])]),t._v(" "),i("p",{staticClass:"price"},[t._v("共计"),i("span",[t._v(" "+t._s(e.payment)+" ")]),t._v("元")]),t._v(" "),"未支付"===e.statusDesc?i("div",{staticClass:"order-pay",on:{click:function(i){return t.toPay(e.orderNo)}}},[i("p",{staticClass:"pay-btn"},[t._v("去支付")])]):t._e()]),t._v(" "),i("ul",{directives:[{name:"show",rawName:"v-show",value:s===t.orderIndex,expression:"index === orderIndex"}],staticClass:"detail-list"},[i("li",{staticClass:"detail-item"},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("订单编号: "+t._s(e.orderNo))]),t._v(" "),i("li",{staticClass:"detail-item"},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("创建时间: "+t._s(e.createTime))]),t._v(" "),null!=e.shippingVo?i("li",{staticClass:"detail-item"},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("收件人："+t._s(e.shippingVo.receiverName))]):t._e(),t._v(" "),null!=e.shippingVo?i("li",{staticClass:"detail-item"},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("收货地址："+t._s(e.shippingVo.receiverProvince)+t._s(e.shippingVo.receiverCity)+t._s(e.shippingVo.receiverAddress))]):t._e(),t._v(" "),e.shippingVo?i("li",{staticClass:"detail-item"},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("电话："+t._s(e.shippingVo.receiverMobile))]):t._e(),t._v(" "),e.shippingVo?i("li",{staticClass:"detail-item"},[i("i",{staticClass:"iconfont"},[t._v("")]),t._v("支付方式："+t._s(e.paymentTypeDesc))]):t._e(),t._v(" "),i("li",{staticClass:"detail-item cancel"},[i("p",{staticClass:"up",on:{click:t.packUpDetail}},[t._v("收起"),i("i",{staticClass:"iconfont icon-up"},[t._v("")])]),t._v(" "),"未支付"===e.statusDesc?i("p",{staticClass:"order-cancel-btn",on:{click:function(i){return t.cancelCurOrder(e.orderNo)}}},[t._v("取消订单")]):t._e()])])])}),0):t._e(),t._v(" "),!t.orderList.length&&t.isNoMore?i("div",{staticClass:"no-order"},[t._v("\n        还没有相关订单\n      ")]):t._e()]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:!t.orderList.length&&!t.isNoMore,expression:"!orderList.length && !isNoMore"}],staticClass:"loading-wrap"},[i("loading")],1)]),t._v(" "),i("confirm",{ref:"confirm",attrs:{title:"确认取消订单吗？"},on:{confirm:t.confrim}})],1)},staticRenderFns:[]};var l=i("VU/8")(n,c,!1,function(t){i("5jNY")},"data-v-7de7fcf8",null);e.default=l.exports},"5jNY":function(t,e){},FWz8:function(t,e,i){"use strict";e.b=function(t){return Object(s.a)({url:"/order/create.do",params:{shippingId:t}})},e.c=function(){return Object(s.a)({url:"/order/get_order_cart_product.do"})},e.d=function(t,e){return Object(s.a)({url:"/order/list.do",params:{pageNum:t,pageSize:e}})},e.a=function(t){return Object(s.a)({url:"/order/cancel.do",params:{orderNo:t}})};var s=i("him/")}});
//# sourceMappingURL=9.e550a9a383d3e5578c32.js.map