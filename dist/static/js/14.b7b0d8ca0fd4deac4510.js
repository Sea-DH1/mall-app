webpackJsonp([14],{DsfB:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=s("vMJZ"),i={data:function(){return{username:"",question:"",answer:"",newPassword:"",token:"",showFirstStep:!0,showSecondStep:!1,showThirdStep:!1}},mounted:function(){var t=this;setTimeout(function(){t.$refs.firstInput.focus()},20)},methods:{handleUserLogin:function(){var t=this;""!==this.username&&""!==this.password&&userLogin({username:this.username,password:this.password}).then(function(e){t.$router.back()}).catch(function(e){t.$notice(e.msg)})},goSecondStep:function(){var t=this;""!==this.username&&Object(n.c)({username:this.username}).then(function(e){t.question=e.data,t.showFirstStep=!1,t.showSecondStep=!0,setTimeout(function(){t.$refs.secondInput.focus()},20)}).catch(function(e){t.$notice(e.msg)})},goThirdStep:function(){var t=this;""!==this.answer&&Object(n.a)({username:this.username,question:this.question,answer:this.answer}).then(function(e){t.token=e.data,t.showThirdStep=!0,t.showSecondStep=!1,setTimeout(function(){t.$refs.thirdInput.focus()},20)}).catch(function(e){t.$notice(e.msg)})},modifySuccess:function(){var t=this;""!==this.newPassword&&this.newPassword.length>=6&&Object(n.f)({username:this.username,passwordNew:this.newPassword,forgetToken:this.token}).then(function(e){t.$notice(e.msg),setTimeout(function(){t.$destroy(),t.$router.go(-1)},800)}).catch(function(e){t.$notice(e.msg)})},removeInputInfo:function(t){"username"===t?this.username="":"answer"===t?this.answer="":"newPwd"===t&&(this.newPassword="")},back:function(){this.showFirstStep?this.$router.back():this.showSecondStep?(this.showSecondStep=!1,this.showFirstStep=!0):this.showThirdStep&&(this.showThirdStep=!1,this.showSecondStep=!0)}},computed:{inputStatus:function(){return this.showFirstStep&&""!==this.username||this.showSecondStep&&""!==this.answer||this.showThirdStep&&this.newPassword&&this.newPassword.length>=6?"opacity: 1":"opacity: 0.6"}}},a={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"login-wrap"},[n("div",{staticClass:"title"},[n("span",{staticClass:"back",on:{click:t.back}},[n("i",{staticClass:"iconfont"},[t._v("")])]),t._v(" "),n("span",{staticClass:"text"},[t._v("找回密码")])]),t._v(" "),n("div",{staticClass:"logo"},[n("img",{attrs:{src:s("kTO4"),alt:""}})]),t._v(" "),n("transition-group",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFirstStep,expression:"showFirstStep"}],key:"username",staticClass:"input-wrap"},[n("div",{staticClass:"input-item"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.username,expression:"username",modifiers:{trim:!0}}],ref:"firstInput",staticClass:"input",attrs:{type:"text",placeholder:"用户名"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.username&&t.username.length>0,expression:"username && username.length > 0"}],staticClass:"cancel-input",on:{click:function(e){return t.removeInputInfo("username")}}},[t._v("x")])]),t._v(" "),n("div",{staticClass:"login-btn",style:t.inputStatus,on:{click:t.goSecondStep}},[t._v("下一步")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showSecondStep,expression:"showSecondStep"}],key:"answer",staticClass:"input-wrap"},[n("p",{staticClass:"tips-text"},[t._v("提示问题是："),n("span",[t._v(t._s(t.question))])]),t._v(" "),n("div",{staticClass:"input-item"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.answer,expression:"answer",modifiers:{trim:!0}}],ref:"secondInput",staticClass:"input",attrs:{type:"text",placeholder:"请输入密码提示答案"},domProps:{value:t.answer},on:{input:function(e){e.target.composing||(t.answer=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.answer&&t.answer.length>0,expression:"answer && answer.length > 0"}],staticClass:"cancel-input",on:{click:function(e){return t.removeInputInfo("answer")}}},[t._v("x")])]),t._v(" "),n("div",{staticClass:"login-btn",style:t.inputStatus,on:{click:t.goThirdStep}},[t._v("下一步")])]),t._v(" "),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showThirdStep,expression:"showThirdStep"}],key:"newPassword",staticClass:"input-wrap"},[n("div",{staticClass:"input-item"},[n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.newPassword,expression:"newPassword",modifiers:{trim:!0}}],ref:"thirdInput",staticClass:"input",attrs:{type:"password",placeholder:"请输入不少于6位的新密码"},domProps:{value:t.newPassword},on:{input:function(e){e.target.composing||(t.newPassword=e.target.value.trim())},blur:function(e){return t.$forceUpdate()}}}),t._v(" "),n("span",{directives:[{name:"show",rawName:"v-show",value:t.newPassword&&t.newPassword.length>0,expression:"newPassword && newPassword.length > 0"}],staticClass:"cancel-input",on:{click:function(e){return t.removeInputInfo("newPwd")}}},[t._v("x")])]),t._v(" "),n("div",{staticClass:"login-btn",style:t.inputStatus,on:{click:t.modifySuccess}},[t._v("完成")])])])],1)])},staticRenderFns:[]};var o=s("VU/8")(i,a,!1,function(t){s("jNlY")},"data-v-3bf085ee",null);e.default=o.exports},jNlY:function(t,e){}});
//# sourceMappingURL=14.b7b0d8ca0fd4deac4510.js.map